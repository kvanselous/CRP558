<!<!DOCTYPE html>
  <html>
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
      <title>Iowa Recovery Providers</title>   
      <link rel="stylesheet" href="https://js.arcgis.com/4.14/esri/themes/light/main.css">
      <script src="https://js.arcgis.com/4.14/"></script>
        <style>         

            html, body, #viewDiv {
                    padding: 10;
                    margin: 10;
                    height: 750px;
                    width: 95%;
                    }
  

        </style>
    </head>
    <body>   
        <h1>Iowa Recovey Provider Map</h1>
        <div id="viewDiv"></div>
        
        
        <script>
            require([
                "esri/Map",
                "esri/views/MapView",
                "esri/layers/FeatureLayer",
                "esri/widgets/Legend"
                 ], function(Map, MapView, FeatureLayer, Legend) {
       
              var legend = new Legend({
  view: view,
  layerInfos: [{
    layer: featureLayer,
    title: "Legend"
  }]
});

view.ui.add(legend, "bottom-right");

             var map = new Map({
                basemap: "topo-vector"
                });       

              var view = new MapView({
                  container: "viewDiv",
                  map: map,
                  center: [-93.6250,41.5868],
                  zoom: 7
                  });

            
            //The below code shows how to add an ArcGIS Online Layer to your map.  Please note, this code corresponds with Step 4 of the 'Creating and Adding Data with ArcGIS online' tutorial.  This code references the unique ID provided from ArcGIS online to pull the layer from the ArcGIS Online Dashboard.  The functions below add this information to the map or tell the browser the display an error message if this information does not show. Esri's example code was used to help build this section: https://codepen.io/pen?&editable=true&editors=100    
           var county = new FeatureLayer ({
               url:"https://services8.arcgis.com/wBQHtQCVrZQRDeMX/arcgis/rest/services/county_1/FeatureServer",
               colorfill: "white"
           })
           map.add(county)
        
         var popupCOVID ={
             "title": "Number of Active COVID-19 Cases",
             "content": "{Cases} Number of Total Cases"
         }
         var COVID =new FeatureLayer({
              url:"https://services8.arcgis.com/wBQHtQCVrZQRDeMX/arcgis/rest/services/covid_nyt_iowa/FeatureServer",
              outFields: ["Cases"],
              popupTemplate: popupCOVID    
         })
          map.add(COVID)
                
          var popupIRP ={
                "title": "Iowa Recovery Provider",
                "content": "Name:{Name}<br>Street:{Street}<br>City:{City} <br> State:{State} <br>Zip:{Zip}<br>Website:{URL}<br>Services Offered:{Services Offered}<br>Fees:{Fees}<br>COVID-19 Response-as of 4/6:{COVID}"
            }
        
          
            var IRP = new FeatureLayer({
                url:"https://services8.arcgis.com/wBQHtQCVrZQRDeMX/arcgis/rest/services/datasetiowarecoveryproviderskvs2004132/FeatureServer",  
                outFields:["Name","Street","City","State","Zip","URL","Services Offered","Fees","COVID"],
                popupTemplate: popupIRP
            });
           map.add(IRP);
                });      
    
           </script>

      </body>
</html>
